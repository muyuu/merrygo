"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};!function(t){var e="merrygo",i="object"===("undefined"==typeof self?"undefined":_typeof(self))&&self.self===self&&self||"object"===("undefined"==typeof global?"undefined":_typeof(global))&&global.global===global&&global;"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?module.exports=t(i,require("jquery")):i[e]=t(i,$)}(function(t,e){function i(t){var i,s=".js-merrygo",o=n(t)?{}:t;n(o.root)&&(i=e(s)),n(o.root)||(i=o.root instanceof e?t.root:e(t.root));for(var h=i.length,a=[],u=0;h>u;u++)a[u]=new r(o,i[u]);return a}function r(t,i){return this.rootclass=i,this.opt={prefix:"js-",length:n(t.length)?1:t.length,force:n(t.force)?!1:t.force,inner:n(t.inner)?".js-merrygo__inner":t.inner,items:n(t.items)?".js-merrygo__items":t.items,item:n(t.item)?".js-merrygo__item":t.item,useArrow:n(t.useArrow)?!0:t.useArrow,arrow:n(t.arrow)?".js-merrygo__arrow":t.arrow,arrowPrev:n(t.arrowPrev)?".js-merrygo__arrowPrev":t.arrowPrev,arrowNext:n(t.arrowNext)?".js-merrygo__arrowNext":t.arrowNext,itemMargin:n(t.itemMargin)?0:t.itemMargin,useDots:n(t.useDots)?!0:t.useDots,dots:n(t.dots)?".js-merrygo__dots":t.dots,dot:n(t.dot)?".js-merrygo__dot":t.dot,dotContent:n(t.dotContent)?"â—‹":t.dotContent,currentClass:n(t.currentClass)?"current":t.currentClass,duration:n(t.duration)?400:t.duration,interval:n(t.interval)?3e3:t.interval,onOpen:t.onOpen||null,onClose:t.onClose||null,onClick:t.onClick||null,onAnimateEnd:t.onAnimateEnd||null},this.$root=e(i),this.$inner=this.$root.find(this.opt.inner),this.$items=this.$root.find(this.opt.items),this.$item=this.$root.find(this.opt.item),this.$dots=this.$root.find(this.opt.dots),this.$dot=this.$root.find(this.opt.dot),this.opt.useArrow&&(this.$arrow=this.$root.find(this.opt.arrow)),this.timer=null,this.resizeTimer=null,this.currentIndex=0,this.itemLength=this.$item.length,this.singleItemWidth=this.$item.first().outerWidth(!0),this.isAnimate=!1,this.isHover=!1,this.isRun()?(this.setDom(),this.reset(),this.setCss(),this.pushCurrentClass(),this.startTimerEvent(),this.setClickEvent(),this.setHoverEvent(),void this.setResizeEvent()):(this.opt.useArrow&&this.$arrow.hide(),!1)}var n=function(t){return void 0===t},s=function(t){return t.replace(".","")},o=function(t,e){return t.replace(e,"")},h=function(t,e){return s(t)+" "+o(s(t),e)};return r.prototype.isRun=function(){return this.itemLength>this.opt.length||this.opt.force},r.prototype.setDom=function(){this.setItems(),this.opt.useDots&&this.setDots()},r.prototype.setItems=function(){for(var t=this,i=0;1>=i;i++)this.$item.each(function(i,r){t.$items.append(e(r).clone(!0,!0))})},r.prototype.setDots=function(t){var e=this.makeDotsDomStr();this.$root.append(e),this.$dots=this.$root.find(this.opt.dots),this.$dot=this.$root.find(this.opt.dot)},r.prototype.makeDotsDomStr=function(){for(var t=this.$item.length,e="<ul class='"+h(this.opt.dots,this.opt.prefix)+"'>",i=0;t>i;i++)e+="<li class='"+h(this.opt.dot,this.opt.prefix)+"'>",e+="<span>",e+=this.opt.dotContent,e+="</span>",e+="</li>";return e+="</ul>"},r.prototype.setCss=function(){this.$items.css({width:this.singleItemWidth*this.itemLength*3,left:-(this.singleItemWidth*this.itemLength)}),this.$root.find(this.opt.item).css({width:this.singleItemWidth,"padding-left":this.opt.itemMargin/2,"padding-right":this.opt.itemMargin/2})},r.prototype.cancelTimerEvent=function(){clearInterval(this.timer)},r.prototype.startTimerEvent=function(){var t=this;clearInterval(this.timer),this.timer=setInterval(function(){t.next()},this.opt.interval)},r.prototype.setClickEvent=function(){var t=this;this.$arrow.on("click",function(i){return t.isAnimate?!1:(t.isAnimate=!0,t.cancelTimerEvent(),e(i.currentTarget).hasClass(s(t.opt.arrowNext))&&t.next(),e(i.currentTarget).hasClass(s(t.opt.arrowPrev))&&t.prev(),!1)}),this.$dot.on("click",function(e){if(t.isAnimate)return!1;var i=t.$dot.index(e.currentTarget);i-t.currentIndex;return i===t.currentIndex?!1:(t.isAnimate=!0,t.cancelTimerEvent(),void t.moveToIndex(i))})},r.prototype.setHoverEvent=function(){var t=this;this.$root.find(this.opt.item).hover(function(){t.isHover=!0,t.isAnimate||(t.isAnimate=!1,t.cancelTimerEvent())},function(){t.isHover=!1,t.isAnimate||t.startTimerEvent()})},r.prototype.setResizeEvent=function(){var t=this;e(window).on("resize",function(){t.resizeHandler()})},r.prototype.resizeHandler=function(){var t=this;this.resizeTimer!==!1&&clearTimeout(this.resizeTimer),this.resizeTimer=setTimeout(function(){t.reset()},200)},r.prototype.reset=function(){this.cancelTimerEvent(),this.singleItemWidth=e(this.rootclass).innerWidth()/this.opt.length,this.setCss(),this.startTimerEvent()},r.prototype.moveToIndex=function(t){return"number"!=typeof t?!1:this.move(t)},r.prototype.next=function(){return this.move("next")},r.prototype.prev=function(){return this.move("prev")},r.prototype.move=function(t){var e,i=this,r=this.currentIndex,n=-(this.singleItemWidth*this.itemLength);switch(t){case"next":e=1;break;case"prev":e=-1;break;default:e=t-r}return n-=e*this.singleItemWidth,this.pushCurrentClass(t),this.isAnimate=!0,this.$items.animate({left:n},this.opt.duration,function(){i.arrowCallback(t,e),i.startTimerEvent(),i.isAnimate=!1}),this},r.prototype.pushCurrentClass=function(t){this.changeIndex(t);var e=this.currentIndex,i=this.opt.currentClass;return this.$dot.removeClass(i),this.$dot.eq(e).addClass(i),this},r.prototype.changeIndex=function(t){return"next"===t&&this.currentIndex++,"prev"===t&&this.currentIndex--,"number"==typeof t&&(this.currentIndex=t),this.roundIndex(),this},r.prototype.roundIndex=function(){return this.isValidIndex()&&this.currentIndex,this.currentIndex<0&&(this.currentIndex=this.itemLength-1),this.currentIndex=0,this},r.prototype.isValidIndex=function(){return 0<=this.currentIndex&&this.currentIndex+1<=this.itemLength},r.prototype.arrowCallback=function(t,e){var i=this.$items.find(this.opt.item);if("next"===t&&this.$items.append(i.first()),"prev"===t&&this.$items.prepend(i.last()),"number"==typeof t)for(var r=Math.abs(e),n=0;r>n;n++)e>0?this.$items.append(this.$items.find(this.opt.item).first()):this.$items.prepend(this.$items.find(this.opt.item).last());return this.$items.css({left:-(this.singleItemWidth*this.itemLength)}),this},i});
//# sourceMappingURL=merrygo.min.js.map
